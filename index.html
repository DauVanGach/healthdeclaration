<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
  <head>
    <title>172 - AntiCOVID Health Declaration </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="qrcode.js"></script>
	<link href="style1.css" rel="stylesheet" type="text/css">
	<link rel="icon" type="image/png" href="favicon.png"/>
  </head>
  <body>
  <div class="page-all" id="page-all">
	<div class="banner" id="banner-page">
		<img id="favicon" src="favicon.png" alt="172 - AntiCOVID">
		<div class="banner-text-align">
			<div class="bnrtxt" id="banner-text">172 - AntiCOVID Health Declaration</div>
			<div class="bnrtxt" id="banner-text1">Lữ đoàn 172 chung tay đẩy lùi đại dịch COVID-19 </div>
		</div>
	</div>
	<div class="qr" id="qrcodeView"
		<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
			<g id="qrcode"/>
		</svg>
		<div id="qrdescript"> Hãy trình mã này dưới máy quét QR</div>
	</div>
	<div class="main-form">
		<form id="declareForm">
			<div class="info">
				<div class="group">
					<label for="user" class="label">Họ và tên</label>
					<input id="user" type="text" class="input" placeholder="Tiếng Việt có dấu" autofocus>
				</div>
				<div class="group">
					<label for="birthday" class="label">Năm sinh</label>
					<input id="birthday" type="number" class="input">
				</div>
				<div class="group">
					<label for="sex" class="label">Giới tính</label>
					<input type="radio" name="sex" value="nam" checked> Nam
					<input type="radio" name="sex" value="nu"> Nữ
					<input type="radio" name="sex" value="khac"> Khác
				</div>
				<div class="group">
					<label for="rank_" class="label">Cấp bậc</label>
					<input id="rank_" type="number" class="input" placeholder="1, 2, 3" min ="1" max ="34">
				</div>
				<div class="group">
					<label for="position_" class="label">Chức vụ</label>
					<input id="position_" type="text" class="input">
				</div>
				<div class="group">
					<label for="unit_" class="label">Đơn vị</label>
					<input id="unit_" type="text" class="input" autocomplete>
				</div>
				<div class="group">
					<label for="phoneNumber" class="label">Số điện thoại</label>
					<input id="phoneNumber" type="tel" class="input" autocomplete>
				</div>
			</div>
			<div class = "declare">
				<div class="group">
					<label for="vacInject" class="label">Bạn đã tiêm vắc xin</label>
					<input type="radio" name="vacInject" value="chua" checked> Chưa
					<input type="radio" name="vacInject" value="roi"> Rồi
				</div>
				<div class="group">
				<label for="vacInjected" class="label">Loại vắc xin đã tiêm</label>
				<input id="vactypeInput" class="input" list="vactype">
				<datalist class="datalist" id="vactype">
				<option value="Moderna">
				<option value="SputnicV">
				<option value="AstraZeneca">
				<option value="NanoCovax">
				<option value="SinoVax">
				</datalist>
				</div>
				
			</div>
		
		</form>
		<div class="btn">
					<button id="btnDeclare" class="button" type="button" onclick="declareFunction()">Tạo mã</button>
					<button id="btnReDeclare" class="button" type="button" onclick="reDeclareFunction()">Sửa lời khai</button>
					<button id="btnReset" class="button" type="button" onclick="resetFunction()">Nhập lại</button>
			</div>
	</div>		
	</div>
	<script type="text/javascript">
  var qrcode = new QRCode(document.getElementById("qrcode"), {
      width : 300,
      height : 300,
      useSVG: true
  });

  function makeCode () {		
		var alterText = "Tờ khai y tế";
		var userText =  document.getElementById("user");
		var birthdayText =  document.getElementById("birthday");
		//var sexText =  document.getElementByName("sex");
		var rank_Text =  document.getElementById("rank_");
		var position_Text =  document.getElementById("position_");
		var unit_Text =  document.getElementById("unit_");
		var phoneNumberText =  document.getElementById("phoneNumber");
		//var vacInjectText =  document.getElementByName("vacInject");
		
		
		alterText = alterText + userText.value + birthdayText.value.toString() + $("input[type='radio'][name='sex']:checked").val() + rank_Text.value.toString() + position_Text.value + unit_Text.value + phoneNumberText.value.toString() + $("input[type='radio'][name='vacInject']:checked").val();
		if (!alterText) {
			alert("Input a text");
			return;
		}

      qrcode.makeCode(alterText);
  }
	
 // makeCode();
  function declareFunction(){
	var qrcodeView = document.getElementById("qrcodeView");
	var formView = document.getElementById("declareForm");
	var qrdescript = document.getElementById("qrdescript");
	makeCode();
	formView.style.display = "none"
	qrcodeView.style.display = "block";
	qrdescript.style.display = "block";
	
  }
  function  resetFunction(){
	var qrcodeView = document.getElementById("qrcodeView");
	var formView = document.getElementById("declareForm");
	document.getElementById("declareForm").reset();
	qrcodeView.style.display = "none";
	formView.style.display = "block"
  }
  function reDeclareFunction(){
	var qrcodeView = document.getElementById("qrcodeView");
	var formView = document.getElementById("declareForm");
	//document.getElementById("declareForm").reset();
	qrcodeView.style.display = "none";
	formView.style.display = "block"
  }
    </script>
	
  </body>
</html>
